<div class="container">
  <div class="group-show-container">
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-members" role="tab"
          aria-controls="pills-home" aria-selected="true">Members</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab"
          aria-controls="pills-profile" aria-selected="false">Events</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab"
          aria-controls="pills-profile" aria-selected="false">Nannies</a>
      </li>
    </ul>


    <% unless current_user.group.nil? || current_user.group.id != @group.id %>
      <%= render 'member_show.html.erb' %>
    <% else %>
      <%= render 'non_member_show.html.erb' %>
    <% end %>


    <div class="group-info">
      <p><i class="fas fa-user-circle"></i> <%= @group.description %></p>
      <p><i class="fas fa-map-marker-alt"></i> <%= @group.location %></p>
    </div>

    <div class="tab-content pt-2 pl-1" id="pills-tabContent">
      <div class="tab-pane fade show active" id="pills-members" role="tabpanel" aria-labelledby="pills-members-tab">
        <h4 class="group-show-h4">Some of our members...</h4>
        <div>
          <% @users.last(4).each do |user| %>
            <div class="card-product-small ">
              <div class="d-flex flex-column justify-content-center align-items-center">
                <%= image_tag user.photo, class: "avatar-large"  %>
                <a class="btn btn-flat-small-fix" href="#"><%= user.full_name %></a>
              </div>
              <div class="card-product-infos-small">
                <p><i class="fas fa-portrait"></i> <%= user.bio %></p>
              </div>
            </div>
          <% end %>
        </div>
      </div>

      <div class="tab-pane fade show active" id="pills-events" role="tabpanel" aria-labelledby="pills-events-tab">
        <h4 class="group-show-h4">Upcoming events...</h4>
        <%= link_to "Browse all events", group_events_path(@group), class: "groups-nav-link" %>
        <div>
          <% @events.first(4).each do |event| %>
            <div class="card-product">
              <div class="card-product-infos">
                <h6><%= event.name %></h6>
                <p><i class="far fa-calendar"></i> <%= event.date.strftime("%d/%m/%y") %></p>
                <p><%= event.description %></p>
                <%= link_to "View event", event_path(event), :class => "btn-flat-small" %>
              </div>
            </div>
          <% end %>
        </div>
      </div>

      <!-- <div class="tab-pane fade show active" id="pills-nannies" role="tabpanel" aria-labelledby="pills-nannies-tab"> -->
        <h4 class="group-show-h4">Some of our nannies...</h4>
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <% unless @group.nannies.empty? %>
              <% nannies = @nannies.first(4).to_a %>
                <div class="carousel-item active">
                  <div class="card-product">
                    <div class="card-product-infos">
                      <%= image_tag nannies[0].user.photo, class: "avatar-large"  %>
                      <h6><%= nannies[0].name %></h6>
                      <p><%= nannies[0].bio %></p>
                    </div>
                   </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <div class="card-product">
                    <div class="card-product-infos">
                      <%= image_tag nannies[1].user.photo, class: "avatar-large"  %>
                      <h6><%= nannies[1].name %></h6>
                      <p><%= nannies[1].bio %></p>
                    </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <div class="card-product">
                    <div class="card-product-infos">
                      <%= image_tag nannies[2].user.photo, class: "avatar-large"  %>
                      <h6><%= nannies[2].name %></h6>
                      <p><%= nannies[2].bio %></p>
                    </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <div class="card-product">
                    <div class="card-product-infos">
                      <%= image_tag nannies[3].user.photo, class: "avatar-large"  %>
                      <h6><%= nannies[3].name %></h6>
                      <p><%= nannies[3].bio %></p>
                    </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <p><%= link_to "Browse all nannies", group_nannies_path(@group), class: "groups-nav-link" %></p>
                </div>

                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
            <% end %>
          </div>
        </div>
      <!-- </div> -->
    </div>
  </div>
</div>
